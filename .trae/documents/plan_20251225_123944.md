## 修复计划

### 1. 修复注册失败问题
**问题原因**：
- 注册请求返回 500 错误，可能是由于数据库字段约束或关联关系问题
- `patient` 表的 `PAT_NAME`、`PAT_SURNAME`、`PAT_FIRSTNAME` 字段都是必填的
- 可能存在事务处理问题

**解决方案**：
- 优化 `AuthController.java` 中的 `register` 方法，添加更详细的日志记录
- 确保前端传递的患者信息包含所有必填字段
- 添加更完善的错误处理机制

### 2. 修复候诊列表获取失败问题
**问题原因**：
- OPD 实体类中包含 `patient` 关联字段，当获取候诊列表时会尝试加载关联的患者信息
- 可能存在关联加载失败导致的 500 错误

**解决方案**：
- 在 `OPDController.java` 中添加 `@JsonIgnoreProperties` 注解，忽略 `patient` 关联
- 或在 OPDRepository 中自定义查询，避免加载关联对象

## 实施步骤
1. 优化 `AuthController.java` 中的 `register` 方法，添加详细日志和错误处理
2. 在 `OPD.java` 实体类中添加 `@JsonIgnoreProperties` 注解，忽略 `patient` 关联
3. 检查并优化数据库连接配置
4. 测试所有修复后的功能

## 预期效果
1. 注册功能可以正常使用，新用户可以成功注册
2. 候诊列表可以正常获取，不再返回 500 错误
3. 系统整体运行稳定